<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
<title>XP Neon Profile â€” Ultra Background</title>
<style>
:root{
  --card-w:420px;
  --card-radius:28px;
  --muted: rgba(255,255,255,0.55);
  --neon-cyan: #00eaff;
  --neon-magenta: #ff2fb3;
}

/* reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  background: #030317;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
  overflow:auto;
}

/* full-screen canvas layers container */
.bg-wrap {
  position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;
  background: linear-gradient(180deg,#02061a 0%, #061022 50%, #010112 100%);
}

.bg-wrap::before,
.bg-wrap::after{
  content:"";
  position:absolute; inset:-20%;
  background-repeat:no-repeat;
  filter: blur(48px) saturate(140%);
  mix-blend-mode: screen;
  opacity:0.9;
}
.bg-wrap::before{
  background:
    radial-gradient(600px 300px at 10% 20%, rgba(0,230,255,0.16), transparent 20%),
    radial-gradient(500px 260px at 90% 80%, rgba(255,40,180,0.14), transparent 18%);
  transform: translateZ(0) rotate(8deg);
}
.bg-wrap::after{
  background:
    radial-gradient(420px 420px at 50% 30%, rgba(120,0,255,0.09), transparent 25%),
    radial-gradient(720px 460px at 30% 80%, rgba(0,150,120,0.06), transparent 18%);
  transform: translateZ(0) rotate(-6deg);
  opacity:0.85;
}

/* grid glow overlay */
.grid-overlay{
  position:absolute; inset:0; z-index:0; pointer-events:none;
  background-image: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0));
}

/* the card */
.scene { position:relative; z-index:5; width:100%; max-width:1200px; display:flex; justify-content:center; align-items:center; }
.card {
  width:min(var(--card-w), 94vw);
  border-radius:var(--card-radius);
  padding:22px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  box-shadow: 0 40px 120px rgba(0,0,0,0.7);
  border:1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(10px) saturate(140%);
  position:relative;
  overflow:visible;
  transform-style:preserve-3d;
}

.card::before{
  content:"";
  position:absolute; inset:-10px; border-radius:calc(var(--card-radius) + 10px);
  background: conic-gradient(from 140deg, rgba(0,230,255,0.14), rgba(255,40,180,0.12));
  filter:blur(24px) saturate(140%);
  opacity:0.9; z-index:-2; mix-blend-mode:screen;
  animation: rim 20s linear infinite;
}
@keyframes rim{to{transform:rotate(360deg)}}

.top { display:flex; gap:16px; align-items:center; transform:translateZ(40px); }
.avatar-wrap { width:132px; height:132px; position:relative; flex:0 0 auto; perspective:1200px; }
.avatar { width:100%; height:100%; border-radius:999px; overflow:hidden; position:relative; border: 4px solid rgba(255,255,255,0.04); box-shadow: 0 22px 60px rgba(0,0,0,0.7); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); display:grid; place-items:center; }
.avatar img{ width:100%; height:100%; object-fit:cover; display:block; transform:translateZ(12px); }
.xp-ring { position:absolute; inset:-18px; display:grid; place-items:center; pointer-events:none; }

.info { flex:1 1 auto; display:flex; flex-direction:column; gap:6px; min-width:0; }
.name-row { display:flex; align-items:center; gap:12px; }
.user-name { font-family:Orbitron,monospace; font-weight:700; font-size:28px; background: linear-gradient(90deg, var(--neon-magenta), var(--neon-cyan)); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:1px; text-shadow: 0 8px 28px rgba(0,0,0,0.6); }
.badge { margin-left:auto; display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); font-weight:700; }
.time { font-family:Orbitron; color:var(--neon-cyan); font-size:15px; text-shadow:0 0 8px rgba(0,255,224,0.12); }

.tagline { color:var(--muted); font-size:13px; margin-top:6px }
.xp-area { margin-top:16px; display:flex; gap:14px; align-items:center; transform:translateZ(28px); }
.xp-left { width:132px; height:132px; display:grid; place-items:center; position:relative; }
.xp-center { flex:1 1 auto; min-width:0; }
.xp-meta { display:flex; gap:12px; align-items:center; justify-content:space-between; color:var(--muted); font-size:13px; }
.xp-large { font-family:Orbitron; font-size:28px; letter-spacing:1px; color:transparent; background: linear-gradient(90deg,var(--neon-cyan),var(--neon-magenta)); -webkit-background-clip:text; background-clip:text; font-weight:700; text-shadow: 0 10px 30px rgba(0,255,224,0.06), 0 0 18px rgba(255,47,179,0.05); }
.progress { margin-top:10px; height:16px; border-radius:999px; overflow:hidden; background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); position:relative; }
.progress > i { display:block; height:100%; width:0%; border-radius:999px; background: linear-gradient(90deg, var(--neon-cyan), var(--neon-magenta)); box-shadow: 0 18px 60px rgba(0,255,224,0.08), 0 6px 28px rgba(255,47,179,0.04); transition: width 900ms cubic-bezier(.2,.9,.3,1); position:relative; overflow:visible; }

.controls { margin-top:18px; display:flex; gap:12px; flex-wrap:wrap; transform:translateZ(16px); }
.btn { --size:64px; height:var(--size); min-width:var(--size); border-radius:14px; padding:0 14px; display:inline-flex; align-items:center; justify-content:center; border:none; cursor:pointer; background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96)); box-shadow: 0 18px 50px rgba(0,0,0,0.6); transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s; position:relative; overflow:hidden; }
.btn:hover { transform:translateY(-8px) scale(1.03); box-shadow: 0 40px 90px rgba(0,0,0,0.75); }
.level-badge { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); font-weight:700; color:var(--muted) }

.gear {
  position:fixed; right:18px; bottom:18px; z-index:6; width:44px; height:44px; border-radius:10px;
  background: rgba(0,0,0,0.35); display:grid; place-items:center; color:rgba(255,255,255,0.9); box-shadow: 0 8px 30px rgba(0,0,0,0.6);
}

@media (max-width:520px){
  .top{ flex-direction:row; gap:12px }
  .xp-area{ flex-direction:column; align-items:flex-start; gap:10px }
  .xp-left{ width:110px; height:110px }
  .user-name{ font-size:20px }
}
</style>
</head>
<body>

<!-- Background -->
<div class="bg-wrap" aria-hidden="true">
  <canvas id="bgCanvas" style="position:absolute; inset:0; width:100%; height:100%;"></canvas>
  <div class="grid-overlay" aria-hidden="true"></div>
</div>

<!-- Card -->
<div class="scene" role="main" aria-label="Cyberpunk XP Profile">
  <article class="card" aria-labelledby="profileName">
    <div class="top">
      <div class="avatar-wrap">
        <div class="avatar" id="avatarBox" role="img" aria-label="profile image">
          <img id="avatarImg" src="data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='800' height='800'>\
<defs><linearGradient id='g' x1='0' x2='1' y1='0' y2='1'><stop offset='0' stop-color='%2300eaff'/><stop offset='1' stop-color='%23ff2fb3'/></linearGradient></defs>\
<rect width='100%' height='100%' fill='url(#g)' rx='400'/>\
<text x='50%' y='52%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='140' fill='rgba(255,255,255,0.95)'>AM</text>\
</svg>" alt="avatar">

        </div>
        <div class="xp-ring" aria-hidden="true">
          <svg width="168" height="168" viewBox="0 0 168 168" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="#00eaff"/><stop offset="1" stop-color="#ff2fb3"/>
              </linearGradient>
              <filter id="blur1"><feGaussianBlur stdDeviation="6" /></filter>
            </defs>
            <circle cx="84" cy="84" r="74" stroke="url(#g1)" stroke-width="6" stroke-linecap="round" opacity="0.32" filter="url(#blur1)"/>
          </svg>
        </div>
      </div>

      <div class="info">
        <div class="name-row">
          <div>
            <div id="profileName" class="user-name">Franciszw</div>
            <div id="profileTag" class="tagline">S</div>
          </div>

          <div class="badge" aria-hidden="true">
            <div class="time" id="time">--:--</div>
            <div class="micro" style="font-size:12px;color:var(--muted);margin-left:8px" id="date">--</div>
          </div>
        </div>

        <div class="xp-area" aria-hidden="false">
          <div class="xp-left" aria-hidden="true">
            <div style="position:relative;z-index:10;text-align:center">
              <div id="levelNum" class="xp-large">Lv 1</div>
              <div style="font-size:12px;color:var(--muted);margin-top:6px">XP</div>
            </div>
            <div class="sparkles" id="sparkles" aria-hidden="true"></div>
          </div>

          <div class="xp-center">
            <div class="xp-meta">
              <div class="small">EXP: <strong id="xpValue" style="color:var(--neon-cyan)">0</strong></div>
              <div class="level-badge">Level <strong id="levelBadge" style="margin-left:8px;color:var(--neon-magenta)">1</strong></div>
            </div>

            <div class="progress" aria-hidden="true" title="Progress to next level">
              <i id="progFill"></i>
            </div>

            <div style="margin-top:10px; display:flex; gap:8px; align-items:center;">
              <div class="micro" style="color:var(--muted)">Next:</div>
              <div class="micro" id="nextXp" style="color:var(--neon-magenta)">+1,200 XP</div>
              <div style="flex:1"></div>
              <button id="addXp" class="btn" aria-label="Add XP">
                <svg viewBox="0 0 24 24" width="18" height="18"><path d="M12 5v14M5 12h14" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
              </button>
            </div>
          </div>
        </div>

        <a href="https://t.me/Franciszw" target="_blank" rel="noopener noreferrer">
  <button class="btn" aria-label="telegram">
    <svg viewBox="0 0 24 24" fill="none" width="22" height="22">
      <path d="M3 11l18-8-8 18-2-7-8-3z" fill="#000"/>
    </svg>
  </button>
</a>
          <div style="flex:1"></div>

          <div class="level-badge" id="xpPreview">+0 XP</div>
        </div>

        <div class="footer" aria-hidden="true" style="margin-top:14px">
          <div class="small">Progress to next level</div>
          <div class="small">Rank <strong id="rankText" style="color:var(--neon-magenta);margin-left:8px">#999</strong></div>
        </div>
      </div>
    </div>
  </article>
</div>

<div class="gear" aria-hidden="true">âš™</div>

<script>
/* =========================
   Background canvas
   ========================= */
(function(){
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  let DPR = Math.max(1, window.devicePixelRatio || 1);
  let w = innerWidth, h = innerHeight;
  let particles = [], lines = [];
  function resize(){
    DPR = Math.max(1, window.devicePixelRatio || 1);
    w = innerWidth; h = innerHeight;
    canvas.width = Math.round(w * DPR);
    canvas.height = Math.round(h * DPR);
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }
  addEventListener('resize', resize);
  resize();

  const N = Math.max(60, Math.floor((w*h)/90000));
  function init(){
    particles = [];
    for(let i=0;i<N;i++){
      particles.push({
        x: Math.random()*w,
        y: Math.random()*h,
        r: 0.6 + Math.random()*2.6,
        hue: 180 + Math.random()*160,
        vx: (Math.random()-0.5)*0.25,
        vy: (Math.random()-0.5)*0.25,
        life: Math.random()*1.5 + 0.6
      });
    }
    lines = [
      {x: w*0.2, y: h*0.15, r: Math.max(200, Math.min(w,h)/3), hue:190, speed:0.0006, phase: Math.random()},
      {x: w*0.85, y: h*0.8, r: Math.max(250, Math.min(w,h)/2.6), hue:320, speed:0.00045, phase: Math.random()+2},
      {x: w*0.45, y: h*0.5, r: Math.max(180, Math.min(w,h)/3.5), hue:250, speed:0.0005, phase: Math.random()+1}
    ];
  }
  init();

  function draw(){
    ctx.clearRect(0,0,w,h);

    const g = ctx.createLinearGradient(0,0,w,h);
    g.addColorStop(0, '#001121');
    g.addColorStop(0.5, '#02102b');
    g.addColorStop(1, '#000614');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,w,h);

    for(const l of lines){
      const g2 = ctx.createRadialGradient(l.x, l.y, 0, l.x, l.y, l.r);
      g2.addColorStop(0, `hsla(${l.hue}, 100%, 55%, 0.22)`);
      g2.addColorStop(0.25, `hsla(${(l.hue+40)%360}, 100%, 45%, 0.12)`);
      g2.addColorStop(0.6, `rgba(0,0,0,0)`);
      ctx.fillStyle = g2;
      ctx.beginPath();
      ctx.arc(l.x, l.y, l.r, 0, Math.PI*2);
      ctx.fill();
    }

    for(const p of particles){
      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.hue},90%,60%,${0.06 + Math.sin((Date.now()+p.x)/6000)*0.04})`;
      ctx.arc(p.x,p.y,p.r*1.6,0,Math.PI*2); ctx.fill();

      ctx.beginPath();
      ctx.fillStyle = `hsla(${p.hue},90%,60%,${0.18 + Math.cos((Date.now()+p.y)/5000)*0.06})`;
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }

    ctx.save();
    ctx.globalAlpha = 0.06;
    ctx.strokeStyle = '#00ffe0';
    ctx.lineWidth = 1;
    const spacing = Math.max(90, Math.floor(Math.min(w,h)/8));
    for(let x=0;x<w;x+=spacing){
      ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,h); ctx.stroke();
    }
    for(let y=0;y<h;y+=spacing){
      ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke();
    }
    ctx.restore();
  }

  function update(){
    for(const p of particles){
      p.x += p.vx + Math.sin((Date.now()+p.x)/5000)*0.08;
      p.y += p.vy + Math.cos((Date.now()+p.y)/6000)*0.04;
      if(p.x < -20) p.x = w + 20;
      if(p.x > w+20) p.x = -20;
      if(p.y < -20) p.y = h + 20;
      if(p.y > h+20) p.y = -20;
    }
    for(const l of lines){
      l.phase += l.speed * (Date.now()%10000);
      l.x += Math.sin(l.phase)*0.12;
      l.y += Math.cos(l.phase)*0.08;
    }
  }

  (function loop(){ update(); draw(); requestAnimationFrame(loop); })();
})();

/* Personalization & avatar */
(function(){
  const meta = (name)=> document.querySelector(`meta[name="${name}"]`)?.content;
  const params = new URLSearchParams(location.search);
  const name = params.get('name') || meta('profile-name') || 'Franciszw';
  const tag = params.get('tag') || meta('profile-tag') || 'Stronger Than Yesterday';
  const avatar = params.get('avatar') || meta('profile-avatar') || '';

  document.getElementById('profileName').textContent = name;
  document.getElementById('profileTag').textContent = tag;
  if(avatar) document.getElementById('avatarImg').src = avatar;

  const avatarBox = document.getElementById('avatarImg');
  const editBtn = document.createElement('div');
  editBtn.style.position='absolute';
  editBtn.style.right='6px'; editBtn.style.bottom='6px';
  editBtn.style.width='36px'; editBtn.style.height='36px'; editBtn.style.borderRadius='10px';
  editBtn.style.background='linear-gradient(135deg,#ff2fb3,#00eaff)';
  editBtn.style.display='grid'; editBtn.style.placeItems='center';
  editBtn.style.boxShadow='0 6px 18px rgba(0,0,0,0.4)';
  editBtn.style.cursor='pointer';
  editBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M3 21v-3.75L14.06 6.19l3.75 3.75L6.75 21H3z" fill="#fff"/></svg>';
  document.querySelector('.avatar').appendChild(editBtn);

  editBtn.addEventListener('click', ()=>{
    const link = prompt('ðŸ”— Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†:');
    if(link && link.trim()) avatarBox.src = link;
  });

  (function(){
    const t = document.getElementById('time');
    const d = document.getElementById('date');
    function update(){ const now=new Date(); t.textContent = String(now.getHours()).padStart(2,'0')+':'+String(now.getMinutes()).padStart(2,'0'); d.textContent = now.toLocaleDateString('fa-IR',{day:'2-digit', month:'short'}); }
    update(); setInterval(update,30*1000);
  })();

})();

/* XP logic */
(function(){
  let totalXP = 0;
  const baseNeed = (lv)=> 3000 + lv*500;
  const xpValueEl = document.getElementById('xpValue');
  const levelNumEl = document.getElementById('levelNum');
  const levelBadgeEl = document.getElementById('levelBadge');
  const progFillEl = document.getElementById('progFill');
  const xpPreviewEl = document.getElementById('xpPreview');
  const rankText = document.getElementById('rankText');

  function computeLevelFromTotal(){
    let l=1, acc=0;
    while(true){
      const need = baseNeed(l);
      if(totalXP >= acc + need){ acc += need; l++; continue; }
      break;
    }
    const within = totalXP - acc;
    const nextXp = baseNeed(l);
    const pct = Math.min(100, Math.round((within/nextXp)*100));
    xpValueEl.textContent = totalXP.toLocaleString();
    levelNumEl.textContent = 'Lv ' + l;
    levelBadgeEl.textContent = l;
    progFillEl.style.width = pct + '%';
    xpPreviewEl.textContent = '+' + (nextXp - within) + ' XP';
    rankText.textContent = '#' + Math.max(1, 999 - Math.floor(totalXP/80));
  }

  computeLevelFromTotal();

  document.getElementById('addXp').addEventListener('click', ()=>{
    const add = 420 + Math.floor(Math.random()*1200);
    totalXP += add;
    spawnSparkles(12);
    playBeep(300,0.04,0.06);
    computeLevelFromTotal();
    document.getElementById('levelNum').animate([{transform:'scale(1)'},{transform:'scale(1.08)'},{transform:'scale(1)'}],{duration:600});
  });

  function spawnSparkles(n){
    const container = document.getElementById('sparkles');
    if(!container) return;
    for(let i=0;i<n;i++){
      const s = document.createElement('div');
      const size = 4 + Math.random()*10;
      s.style.width = s.style.height = size + 'px';
      s.style.position = 'absolute';
      s.style.left = (40 + Math.random()*52) + 'px';
      s.style.top = (40 + Math.random()*52) + 'px';
      s.style.borderRadius = '50%';
      s.style.background = 'radial-gradient(circle, rgba(255,255,255,0.95), rgba(255,255,255,0.06))';
      s.style.filter = 'blur(0.6px)';
      container.appendChild(s);
      const dx = (Math.random()-0.5)*120, dy=(Math.random()-0.5)*120;
      s.animate([{transform:'translate(0,0) scale(0.8)', opacity:1},{transform:`translate(${dx}px,${dy}px) scale(0.2)`, opacity:0}],{duration:900 + Math.random()*800,easing:'cubic-bezier(.2,.9,.3,1)'});
      setTimeout(()=> s.remove(), 1600);
    }
  }

  function playBeep(freq=440, dur=0.06, vol=0.06){
    try{
      const Ctx = window.AudioContext || window.webkitAudioContext;
      const ctx = new Ctx();
      const o = ctx.createOscillator(), g = ctx.createGain();
      o.type='sine'; o.frequency.value=freq; g.gain.value=vol;
      o.connect(g); g.connect(ctx.destination); o.start();
      g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + dur);
      setTimeout(()=>{ o.stop(); ctx.close(); }, dur*1000+60);
    }catch(e){}
  }

})();
</script>
</body>
  <script>
document.getElementById("tgBtn").addEventListener("click", function () {
    const url = this.dataset.link;
    window.open(url, "_blank");
});
</script>
</html>
